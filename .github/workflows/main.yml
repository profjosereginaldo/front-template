name: Validar Pull Request

on:
  pull_request:
    branches:
      - develop

jobs:
  validate:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout do cÃ³digo
        uses: actions/checkout@v4

      - name: Instalar node.js
        uses: actions/setup-node@v4
        with:
          node-version: 24

      - name: Instalar dependÃªncias
        run: npm install

      - name: Build do projeto
        run: npm run build

      - name: ğŸ” Validar apenas um <h1>
        run: |
          H1_COUNT=$(grep -roh "<h1" . | wc -l)
          if [ "$H1_COUNT" -ne 1 ]; then
            echo "âŒ Deve existir exatamente um <h1>. Encontrado: $H1_COUNT"
            exit 1
          fi

      - name: ğŸ“ Validar uso de CSS Grid
        run: |
          if ! grep -roh "display: grid" .; then
            echo "âŒ CSS Grid nÃ£o encontrado no projeto."
            exit 1
          fi

      - name: ğŸ“± Validar Media Query 768px
        run: |
          if ! grep -roh "min-width: 768px" .; then
            echo "âŒ Media query (min-width: 768px) nÃ£o encontrada."
            exit 1
          fi

      - name: ğŸ§ª Validar ausÃªncia de !important
        run: |
          if grep -roh "!important" .; then
            echo "âŒ Uso de !important nÃ£o permitido."
            exit 1
          fi